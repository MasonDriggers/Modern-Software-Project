<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Socrates</title>
    <link rel="stylesheet" href="chatbot1.css" />
</head>
<body>
    <div class="black-bar">
        <a href="index.html" class="bar-link">HOME</a>
        <a href="chatbot1.html" class="bar-link">SOCRATES</a>
        <a href="chatbot2.html" class="bar-link">WILLIAM SHAKESPEARE</a>
        <a href="chatbot3.html" class="bar-link">MAYA ANGELOU</a>
        <a href="chatbot4.html" class="bar-link">MARCUS AURELIUS</a>
    </div>
    <div class="container">
        <h2>YOUR THERAPIST IS IN: SOCRATES</h2>
        <div class="paragraph">
            <p>Socrates (469-399 BCE) was a Greek philosopher renowned for his contributions to ethics and Western philosophy. Born in Athens, little is known about his early life except through the writings of his students, particularly Plato. Socrates is best known for his method of questioning, known as the Socratic method, which aimed at eliciting truth by engaging in dialogue and challenging assumptions. He famously asserted that "the unexamined life is not worth living." Socrates' teachings often challenged societal norms, leading to his trial and execution for impiety and corrupting the youth of Athens. His legacy endures as a foundational figure in philosophical inquiry.</p>
        </div>
        <div class="panel chatbot">
            <div id="chat" class="chatbox">
                <div id="messages"></div>
                <div class="input-area">
                    <textarea id="user-message" placeholder="Type your message here..." onkeydown="handleKeyDown(event)"></textarea>
                    <button onclick="sendMessage()">Send a Message</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Define initial message from chatbot
        var initialMessage = "How can I help?";
        var messages = document.getElementById("messages");

        // Display initial message from chatbot
        var initialMessageDiv = document.createElement("div");
        initialMessageDiv.textContent = "Socrates: " + initialMessage;
        messages.appendChild(initialMessageDiv);

        // Load responses from movie_lines.txt
        var responses = {};

        // Function to load responses from text file
        function loadResponses() {
            fetch('movie_lines.txt')
                .then(response => response.text())
                .then(data => {
                    var lines = data.split('\n');
                    for (var i = 0; i < lines.length; i++) {
                        var parts = lines[i].split(' +++$+++ ');
                        if (parts.length === 5) {
                            responses[parts[0].trim()] = parts[4].trim();
                        }
                    }
                });
        }

        loadResponses();

        // Function to send message
        function sendMessage() {
            var userMessage = document.getElementById("user-message").value;

            // Display user message
            var userMessageDiv = document.createElement("div");
            userMessageDiv.textContent = "User: " + userMessage;
            userMessageDiv.className = "message-container user-message right";
            messages.appendChild(userMessageDiv);

            // Get Eliza's response
            var elizaResponse = getElizaResponse(userMessage);

            // Display Eliza's response with the Socrates icon
            var replyMessageDiv = document.createElement("div");
            var socratesIcon = document.createElement("img");
            socratesIcon.src = "socrates.jpg"; // Path to Socrates icon
            socratesIcon.alt = "Socrates Icon";
            socratesIcon.className = "philosopher-icon"; // Add class for styling
            replyMessageDiv.appendChild(socratesIcon);
            var responseText = document.createTextNode("Socrates: " + elizaResponse);
            replyMessageDiv.appendChild(responseText);
            replyMessageDiv.className = "message-container chatbot-message left";
            messages.appendChild(replyMessageDiv);

            // Display user icon
            var userIcon = document.createElement("img");
            userIcon.src = "user.jpg"; // Path to user icon
            userIcon.alt = "User Icon";
            userIcon.className = "user-icon"; // Add class for styling
            userMessageDiv.appendChild(userIcon);

            // Clear input
            document.getElementById("user-message").value = "";

            // Scroll to the bottom of the chatbox
            messages.scrollTop = messages.scrollHeight;
        }

        // Function to handle key down event in textarea
        function handleKeyDown(event) {
            if (event.key === "Enter") {
                event.preventDefault(); // Prevent default Enter key behavior (line break)
                sendMessage(); // Call sendMessage function
            }
        }

        // Function to get Eliza's response
        function getElizaResponse(message) {
            message = message.toLowerCase(); // Convert message to lowercase for case-insensitive matching
            if (responses.hasOwnProperty(message)) {
                return responses[message];
            } else {
                return "I'm not sure I understand. Can you please rephrase?";
            }
        }
    </script>
</body>
</html>
